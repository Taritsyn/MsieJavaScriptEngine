<Project Sdk="Microsoft.NET.Sdk">

	<PropertyGroup>
		<Product>MSIE JavaScript Engine for .NET</Product>
		<VersionPrefix>3.0.0</VersionPrefix>
		<TargetFrameworks>net40-client;net45;netstandard1.3;netstandard2.0</TargetFrameworks>
		<NetStandardImplicitPackageVersion Condition=" '$(TargetFramework)' == 'netstandard1.3' ">1.6.0</NetStandardImplicitPackageVersion>
		<OutputType>Library</OutputType>
		<TreatWarningsAsErrors>true</TreatWarningsAsErrors>
		<NoWarn>$(NoWarn);CS1591;NU5125</NoWarn>
		<GenerateDocumentationFile>true</GenerateDocumentationFile>
		<DisableDefaultResxToCsConversionTarget>true</DisableDefaultResxToCsConversionTarget>
		<Title>$(Product)</Title>
		<Authors>Andrey Taritsyn</Authors>
		<Description>This library is a .NET wrapper for working with the JavaScript engines of Internet Explorer and Edge (JsRT versions of Chakra, ActiveScript version of Chakra and Classic JavaScript Engine). Project was based on the code of SassAndCoffee.JavaScript (http://github.com/paulcbetts/SassAndCoffee), Chakra Sample Hosts (http://github.com/panopticoncentral/chakra-host) and jsrt-dotnet (http://github.com/robpaveza/jsrt-dotnet).</Description>
		<PackageLicenseFile>LICENSE.txt</PackageLicenseFile>
		<PackageRequireLicenseAcceptance>false</PackageRequireLicenseAcceptance>
		<PackageProjectUrl>https://github.com/Taritsyn/MsieJavaScriptEngine</PackageProjectUrl>
		<PackageIconUrl>http://i.imgur.com/cbiHK.png</PackageIconUrl>
		<RepositoryUrl>https://github.com/Taritsyn/MsieJavaScriptEngine</RepositoryUrl>
		<RepositoryType>git</RepositoryType>
		<PackageTags>JavaScript;ECMAScript;MSIE;IE;Edge;Chakra</PackageTags>
		<PackageReleaseNotes>1. Format of the error messages was unified;
2. Created a new exception classes: `JsCompilationException`, `JsEngineException`, `JsFatalException`, `JsInterruptedException`, `JsScriptException` and `JsUsageException`. These exceptions are responsible for handling errors, some of which were previously handled by the `JsRuntimeException` class;
3. In the `JsException` class was added two new properties: `Category` and `Description`;
4. From the `JsRuntimeException` class was removed one property - `ErrorCode`;
5. In the `JsRuntimeException` class was added three new properties: `Type`, `DocumentName` and `CallStack`;
6. `JsEngineLoadException` class now is inherited from the `JsEngineException` class;
7. `Format` method of the `JsErrorHelpers` class was renamed to the `GenerateErrorDetails`;
8. One part of the auxiliary code was removed, and other part moved to an external library - [AdvancedStringBuilder](https://github.com/Taritsyn/AdvancedStringBuilder);
9. Added a ability to interrupt execution of the script;
10. In JsRT modes added a ability to pre-compile scripts;
11. In `MsieJsEngine` class was added `SupportsScriptPrecompilation` property and four new methods: `Interrupt`, `Precompile`, `PrecompileFile` and `PrecompileResource`;
12. In JavaScript engine settings was added one new property - `MaxStackSize` (default `492` or `984` KB);
13. Added support of .NET Standard 2.0 (only supported `ChakraIeJsRt` and `ChakraEdgeJsRt` modes).</PackageReleaseNotes>
		<NeutralLanguage>en-US</NeutralLanguage>
		<PackageOutputPath>../../nuget</PackageOutputPath>
		<GeneratePackageOnBuild>true</GeneratePackageOnBuild>
		<GenerateAssemblyTitleAttribute>false</GenerateAssemblyTitleAttribute>
		<GenerateAssemblyDescriptionAttribute>false</GenerateAssemblyDescriptionAttribute>
	</PropertyGroup>

	<Import Project="../../build/common.props" />
	<Import Project="../../build/net40-client-target.props" />
	<Import Project="../../build/strong-name-signing.props" />

	<ItemGroup>
		<PackageReference Include="AdvancedStringBuilder" Version="0.1.0" />
		<PackageReference Include="BuildBundlerMinifier" Version="2.4.337" PrivateAssets="All" />
		<PackageReference Include="ResxToCs.MSBuild" Version="1.0.0-alpha6" PrivateAssets="All" />
	</ItemGroup>

	<ItemGroup Condition=" '$(TargetFramework)' == 'net40-client' Or '$(TargetFramework)' == 'net45' ">
		<Compile Remove="Resources/NetCoreStrings.*" />
		<EmbeddedResource Include="Resources/ES5.min.js;Resources/json2.min.js" />
	</ItemGroup>

	<ItemGroup Condition=" '$(TargetFramework)' == 'netstandard1.3' Or '$(TargetFramework)' == 'netstandard2.0' ">
		<Compile Remove="Resources/NetFrameworkStrings.*" />
	</ItemGroup>

	<ItemGroup Condition=" '$(TargetFramework)' == 'netstandard1.3' ">
		<PackageReference Include="System.ComponentModel.TypeConverter" Version="4.1.0" />
		<PackageReference Include="System.Reflection.TypeExtensions" Version="4.1.0" />
		<PackageReference Include="System.Threading.Thread" Version="4.0.0" />
	</ItemGroup>

	<ItemGroup>
		<Content Include="readme.txt">
			<PackagePath>readme.txt</PackagePath>
			<Pack>true</Pack>
		</Content>
		<Content Include="../../LICENSE.txt">
			<PackagePath>$(PackageLicenseFile)</PackagePath>
			<Pack>true</Pack>
			<Visible>false</Visible>
		</Content>
		<Content Include="../../Licenses/*.txt">
			<PackagePath>/</PackagePath>
			<Pack>true</Pack>
			<Visible>false</Visible>
		</Content>
	</ItemGroup>

	<Target Name="СonvertResxToCs" BeforeTargets="BeforeCompile">
		<ResxToCsTask InputDirectory="./Resources/" Namespace="$(RootNamespace).Resources" InternalAccessModifier="true" />
	</Target>

</Project>